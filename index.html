<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Скорость загрузки сайта by akirikovich</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Скорость загрузки сайта</h1>
      <h2 class="project-tagline">клиентская оптимизация</h2>
      <a href="https://github.com/akirikovich/SiteSpeed" class="btn">View on GitHub</a>
      <a href="https://github.com/akirikovich/SiteSpeed/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/akirikovich/SiteSpeed/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>Скорость загрузки сайта напрямую влияет на следующее:</p>

<h4>
<a id="Результаты-в-поисковой-выдаче" class="anchor" href="#%D0%A0%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D1%8B-%D0%B2-%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%BE%D0%B9-%D0%B2%D1%8B%D0%B4%D0%B0%D1%87%D0%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Результаты в поисковой выдаче</h4>

<p>Чем сайт быстрее грузится, тем большее предпочтение ему отдаст поисковик при ранжировании.</p>

<h4>
<a id="Удобство-использования" class="anchor" href="#%D0%A3%D0%B4%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%BE-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>Удобство использования</h4>

<p>Гораздо приятнее пользоваться сайтом, который работает быстро и без задержек</p>

<h4>
<a id="Удобство-мобильных-пользователей" class="anchor" href="#%D0%A3%D0%B4%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%BE-%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D1%8B%D1%85-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Удобство мобильных пользователей</h4>

<p>Хочу выделать отдельно, поскольку число мобильных пользователей постоянно растет и им следует уделить особое внимание. Учитывая, что скорость мобильного интернета в среднем ниже, чем больше мы сможем ускорить сайт, тем более благодарны нам будут за это пользователи мобильных устройств.</p>

<p>В данной статье я опишу те пункты, которые сможет выполнить любой, даже начинающий веб-разработчик. Говорить мы будем именно о клиентской оптимизации.</p>

<h3>
<a id="Что-будем-оптимизировать" class="anchor" href="#%D0%A7%D1%82%D0%BE-%D0%B1%D1%83%D0%B4%D0%B5%D0%BC-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>Что будем оптимизировать?</h3>

<p>При загрузке сайта, браузер пользователя отправляет на сервер множество запросов. Например, на получение CSS, JavaScript, картинок. Каждый запрос отдельно обрабатывается веб-сервером, а именно для каждого запроса открывается соединение, затем идет передача данных и закрытие соединения. Соответственно, если у нас 10 файлов CSS, указанных в нашем html-документе через тег <code>link</code> то для каждого из них будет создан отдельный запрос, на который затрачивается время. 
Иногда даже встречаются случаи, когда запрашивается файл небольшого объема, и тогда, время на установление соединения больше чем время на его передачу.
Соответственно, нужно уменьшать число запросов.</p>

<p>Также, большую роль играет объём передаваемых данных. Всем ясно, что передать по сети 1 мегабайт и 100 килобайт — разные вещи.</p>

<p>Согласно этому, можно выделить две основные задачи для клиентской оптимизации скорости загрузки сайта:
1. Уменьшение числа запросов к веб-серверу
2. Уменьшение объема передаваемых по сети данных</p>

<h3>
<a id="Уменьшение-числа-запросов" class="anchor" href="#%D0%A3%D0%BC%D0%B5%D0%BD%D1%8C%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D1%87%D0%B8%D1%81%D0%BB%D0%B0-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Уменьшение числа запросов</h3>

<p>Для уменьшение числа запросов нам нужно объединить CSS и JS файлы один, чтобы вместо 10-ти запросов, у нас был всего лишь один. Для этого можно воспользоваться написанным мной классом: <a href="https://github.com/akirikovich/filecache.php">https://github.com/akirikovich/filecache.php</a>.</p>

<p>Также, частая проблема — использование множества иконок (небольших картинок) в дизайне сайта. Когда мы указываем в CSS файле путь к картинке, для её получения также создается отдельный запрос. Для оптимизации этого момента, можно использовать технику спрайтов (sprites). Смысл состоит в том, что необходимо собрать все картинки воедино в один большой файл, а в CSS перемещаться по нему с помощью свойства <code>background-position</code>. </p>

<h3>
<a id="Уменьшение-объёма-данных" class="anchor" href="#%D0%A3%D0%BC%D0%B5%D0%BD%D1%8C%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BE%D0%B1%D1%8A%D1%91%D0%BC%D0%B0-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Уменьшение объёма данных</h3>

<p>Мы имеем возможность архивировать информацию, которая передается от сервера клиенту. Т.е. сервер архивирует файл, затем передаёт уже уменьшенный по размеру архив, браузер получает этот архив и распаковывает его.</p>

<p>Пример кода для настройки модуля gzip для веб-сервера apache</p>

<pre><code>&lt;IfModule mod_gzip.c&gt;
    mod_gzip_on         Yes
    mod_gzip_dechunk    Yes
    mod_gzip_item_include file      \.(html?|txt|css|js|php|pl)$
    mod_gzip_item_include mime      ^text\.*
    mod_gzip_item_include mime      ^application/x-javascript.*
    mod_gzip_item_include mime      ^application/x-font-woff.*
    mod_gzip_item_exclude mime      ^image\.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
&lt;/IfModule&gt;
&lt;ifModule mod_deflate.c&gt;
    AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xml application/xhtml+xml text/css text/javascript application/javascript application/x-javascript application/x-font-woff image/jpg image/jpeg
&lt;/ifModule&gt;
</code></pre>

<p>Этот код нужно поместить в файл .htaccess в корне сайта.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/akirikovich/SiteSpeed">Скорость загрузки сайта</a> is maintained by <a href="https://github.com/akirikovich">akirikovich</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
